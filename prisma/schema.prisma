generator client {
  provider        = "prisma-client-js"
  output          = "../src/generated/prisma"
  previewFeatures = ["views"]
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model livros {
  id_livro       BigInt    @id @unique @default(autoincrement())
  titulo         String
  subtitulo      String?
  autor          String
  ano_publicacao Int?      @db.SmallInt
  isbn           String    @db.VarChar
  descricao      String?
  criado_em      DateTime? @db.Timestamptz(6)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model emprestimos {
  id_emprestimo              Int       @id @unique @default(autoincrement())
  id_livro                   Int
  id_usuario                 String    @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  realizado_em               DateTime  @default(now()) @db.Timestamptz(6)
  data_realizado_em          DateTime  @default(dbgenerated("(now())::date")) @db.Date
  data_previsao_devolucao_em DateTime  @db.Date
  status                     Boolean   @default(true)
  data_devolucao_em          DateTime? @db.Date
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model usuarios {
  id_usuario     String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  codigo_familia String
  nome_completo  String
  created_at     DateTime @default(now()) @db.Timestamptz(6)
}

view vw_emprestimos {
  idEmprestimo    Int? @map("idemprestimo")
  codigoFamilia   String? @map("codigofamilia")
  nomeCompleto    String? @map("nomecompleto")
  titulo          String?
  dataRealizadoEm DateTime? @db.Date @map("datarealizadoem")
}
